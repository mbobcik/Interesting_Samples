<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="description/Combined.css,0:HeaderFooterSprite,0:Header.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=C9973DA951AE6202C9B348379A1BE49D" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="description/67b74b86-a273-4ad7-9ed5-0f97276412eaCombined.css,0:HeaderFooterSprite,0:Footer.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=F576C687BC536B84D6E5B3246EE39B49" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Compass Edge Detection</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="description/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="description/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Compass Edge Detection</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            C#, .NET, Class Library, Windows Forms, .NET Framework 4, .NET Framework, .NET Framework 4.0, Image manipulation, Windows General, C# Language, WinForms, .NET Framework 4.5, .NET Framwork, Graphics Functions, Microsoft .NET Framework 3.5 SP1, Visual C Sharp .NET, Image process, Filter expression, Manipulation, .NET 4.5, Computer Vision, .NET Development, Edge Detection, Image Processing
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            Graphics, C#, Class Library, Windows Forms, Graphics and 3D, Images, GeometryDrawing<wbr />, ImageViewer, Graphical Interaction, 2d graphics, DSP (digital signal processing), Extensibility, Image manipulation, Code Sample, Image Gallery, Image, .NET 4, Imaging, Drawing, Colors and Gradient Brushes, Generic C# resuable code, Extension, Image Optimization, C# Language Features, Graphics Functions, BitmapImage, Augmented Reality, Load Image, Dynamically Image, Extension methods, image rendering, Edge Detection, Line Detection, Image Filters, Image Convolution, Image Transformation, graphic rendering
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Desktop, Web, Phone, Data, Windows RT
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">7/6/2013</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MS-LPL</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="http://code.msdn.microsoft.com/Compass-Edge-Detection-4e8ca55f">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Introduction</h1>
<p style="text-align:justify">This article&rsquo;s objective is to illustrate concepts relating to Compass
<a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
Edge Detection</a>. The <a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> methods implemented in this article include: <a title="Wikipedia: Prewitt" rel="tag" href="http://en.wikipedia.org/wiki/Prewitt_operator" >
Prewitt</a>, <a title="Wikipedia: Sobel" rel="tag" href="http://en.wikipedia.org/wiki/Sobel_operator" >
Sobel</a>, <strong><em>Scharr</em></strong>, <a title="Wikipedia: Kirsch" rel="tag" href="http://en.wikipedia.org/wiki/Kirsch_operator" >
Kirsch</a> and <strong><em>Isotropic</em></strong>.</p>
<p style="text-align:center"><strong><em>Wasp: Scharr 3 x 3 x 8</em></strong></p>
<p><span><img id="91470" src="description/Wasp_Scharr3x3x8.jpg" alt="" width="500" height="333" style="margin-right:auto; margin-left:auto; display:block"></span></p>
<h1><span>Building the Sample</span></h1>
<p>There are&nbsp;no special requirements or instructions for building the sample source code.</p>
<h1><span style="font-size:20px">Using the Sample Application</span></h1>
<p style="text-align:justify">The sample source code accompanying this article includes a
<a title="Windows Forms" rel="tag" href="http://msdn.microsoft.com/en-us/library/dd30h2yb.aspx" >
Windows Forms</a> based sample application. When using the sample application users are able to load source/input
<a title="images" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx" >
images</a> from and save result <a title="images" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx" >
images</a> to the local <a title="System.IO.File" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.io.file.aspx" >
file</a> system. The user interface provides a <a title="ComboBox" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx" >
combobox</a> which contains the supported methods of <strong><em>Compass Edge Detection</em></strong>. Selecting an item from the
<a title="ComboBox" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.aspx" >
combobox</a> results in the related <strong><em>Compass Edge Detection</em></strong> method being applied to the current source/input
<a title="Image" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx" >
image</a>. Supported methods are:</p>
<ul>
<li style="text-align:justify"><strong><em>Prewitt3x3x4</em></strong> &ndash; 3&times;3
<a title="Wikipedia: Prewitt" rel="tag" href="http://en.wikipedia.org/wiki/Prewitt_operator" >
Prewitt</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>4 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Prewitt3x3x8</em></strong> &ndash; 3&times;3
<a title="Wikipedia: Prewitt" rel="tag" href="http://en.wikipedia.org/wiki/Prewitt_operator" >
Prewitt</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>8 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Prewitt5x5x4</em></strong> &ndash; 5&times;5
<a title="Wikipedia: Prewitt" rel="tag" href="http://en.wikipedia.org/wiki/Prewitt_operator" >
Prewitt</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>4 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Sobel3x3x4</em></strong> &ndash; 3&times;3
<a title="Wikipedia: Sobel" rel="tag" href="http://en.wikipedia.org/wiki/Sobel_operator" >
Sobel</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>4 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Sobel3x3x8</em></strong> &ndash; 3&times;3
<a title="Wikipedia: Sobel" rel="tag" href="http://en.wikipedia.org/wiki/Sobel_operator" >
Sobel</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <em><strong>8 compass</strong></em> directions </li><li style="text-align:justify"><strong><em>Sobel5x5x4</em></strong> &ndash; 5&times;5
<a title="Wikipedia: Sobel" rel="tag" href="http://en.wikipedia.org/wiki/Sobel_operator" >
Sobel</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <em><strong>4 compass</strong></em> directions </li><li style="text-align:justify"><strong><em>Scharr3x3x4</em></strong> &ndash; 3&times;3
<strong><em>Scharr</em></strong> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>4 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Scharr3x3x8</em></strong> &ndash; 3&times;3
<strong><em>Scharr</em></strong> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>8 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Scharr5x5x4</em></strong> &ndash; 5&times;5
<strong><em>Scharr</em></strong> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>4 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Kirsch3x3x4</em></strong> &ndash; 3&times;3
<a title="Wikipedia: Kirsch" rel="tag" href="http://en.wikipedia.org/wiki/Kirsch_operator" >
Kirsch</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>4 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Kirsch3x3x8</em></strong> &ndash; 3&times;3
<a title="Wikipedia: Kirsch" rel="tag" href="http://en.wikipedia.org/wiki/Kirsch_operator" >
Kirsch</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>8 compass</em></strong> directions </li><li style="text-align:justify"><strong><em>Isotropic3x3x4</em></strong> &ndash; 3&times;3
<strong><em>Isotropic</em></strong> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <em><strong>4 compass</strong></em> directions </li><li style="text-align:justify"><strong><em>Isotropic3x3x8</em></strong> &ndash; 3&times;3
<strong><em>Isotropic</em></strong> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> in <strong><em>8 compass</em></strong> directions </li></ul>
<p style="text-align:justify">The following image is a screenshot of the <strong>
<em>Compass Edge Detection Sample Application</em></strong> in action:</p>
<p><img id="91471" src="description/Compass_Edge_Detection_Sample_Application.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></p>
<p style="text-align:center"><strong><em>Bee: Isotropic 3 x 3 x 8</em></strong></p>
<p><img id="91472" src="description/Bee_Isotropic3x3x8.jpg" alt="" width="400" height="336" style="margin-right:auto; margin-left:auto; display:block"></p>
<h1>Compass Edge Detection Overview</h1>
<p style="text-align:justify"><strong><em>Compass Edge Detection</em></strong> as a concept title can be explained through the implementation of compass directions.
<strong><em>Compass Edge Detection</em></strong> can be implemented through <a title="Image Convolution" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)#Convolution" >
image convolution</a>, using multiple <a title="Matrix" rel="tag" href="http://en.wikipedia.org/wiki/Matrix_(mathematics)" >
matrix</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a>, each suited to detecting edges in a specific direction. Often the edge directions implemented are:</p>
<ul>
<li><strong><em>North</em></strong> </li><li><strong><em>North East</em></strong> </li><li><strong><em>East</em></strong> </li><li><strong><em>South East</em></strong> </li><li><strong><em>South</em></strong> </li><li><strong><em>South West</em></strong> </li><li><strong><em>West</em></strong> </li><li><strong><em>North West</em></strong> </li></ul>
<p style="text-align:justify">Each of the compass directions listed above differ by
<strong><em>45 degrees</em></strong>. Applying a <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> rotation of <strong><em>45 degrees</em></strong> to an existing direction specific
<a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> results in a new <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> suited to detecting edges in the next compass direction.</p>
<p style="text-align:justify">Various <a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> can be implemented in <strong><em>Compass Edge Detection</em></strong>. This article and accompanying sample source code implements the following
<a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> types:</p>
<ul>
<li><strong><em><a title="Wikipedia: Prewitt" rel="tag" href="http://en.wikipedia.org/wiki/Prewitt_operator" >Prewitt</a></em></strong>
</li><li><strong><em><a title="Wikipedia: Sobel" rel="tag" href="http://en.wikipedia.org/wiki/Sobel_operator" >Sobel</a></em></strong>
</li><li><strong><em><a title="Wikipedia: Kirsch" rel="tag" href="http://en.wikipedia.org/wiki/Kirsch_operator" >Kirsch</a></em></strong>
</li><li><strong><em>Scharr</em></strong> </li><li><strong><em>Isotropic</em></strong> </li></ul>
<p style="text-align:center"><strong><em>Prey Mantis: Sobel 3 x 3 x 8</em></strong></p>
<p><img id="91473" src="description/PreyMantis_Sobel3x3x8.jpg" alt="" width="400" height="311" style="margin-right:auto; margin-left:auto; display:block"></p>
<p style="text-align:justify">The steps required when implementing <strong><em>Compass Edge Detection</em></strong> can be described as follows:</p>
<ol>
<li style="text-align:justify"><strong><em>Determine the compass kernels.</em></strong> When an
<a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a>&nbsp; suited to a specific direction is known, the <a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> suited to the 7 remaining compass directions can be calculated. Rotating a
<a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> by 45 degrees around a central axis equates to the <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> suited to the next compass direction. As an example, if the <a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> suited to detect edges in a northerly direction were to be rotated clockwise by 45 degrees around a central axis the result would be an
<a title="Wikipedia: Edge detection" rel="tag" href="http://en.wikipedia.org/wiki/Edge_detection" >
edge detection</a> <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> suited to edges in a North Easterly direction. </li><li style="text-align:justify"><strong><em>Iterate source image pixels.</em></strong> Every pixel forming part of the source/input
<a title="Image" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx" >
image</a> should be iterated, implementing <a title="Convolution" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)#Convolution" >
convolution</a> using each of the compass <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a>. </li><li style="text-align:justify"><strong><em>Determine the most responsive kernel convolution.</em></strong> After having applied each compass
<a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> to the pixel currently being iterated, the most responsive compass <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> determines the output value. In other words, after having applied <a title="Convolution" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)#Convolution" >
convolution</a> eight times on the same pixel using each compass direction the output value should be set to the highest value calculated.
</li><li style="text-align:justify"><strong><em>Validate and set output result.</em></strong> Ensure that the highest value returned from
<a title="Convolution" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)#Convolution" >
convolution</a> does not equate to less than 0 or more than 255. Should a value be less than zero the result should be assigned as zero. In a similar fashion, should a value exceed 255 the result should be assigned as 255.
</li></ol>
<p style="text-align:center"><strong><em>Prewitt Compass Kernels</em></strong></p>
<p><img id="91474" src="description/Prewitt_Compass_Kernels.jpg" alt="" width="400" height="400" style="margin-right:auto; margin-left:auto; display:block"></p>
<p style="text-align:center"><strong><em>LadyBug: Prewitt 3 x 3 x 8</em></strong></p>
<p><img id="91475" src="description/LadyBug_Prewitt3x3x8.jpg" alt="" width="400" height="277" style="margin-right:auto; margin-left:auto; display:block"></p>
<h1>Rotating Convolution Kernels</h1>
<p style="text-align:justify"><a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >Kernels</a> can be rotated by implementing a
<a title="Rotate Transform" rel="tag" href="http://en.wikipedia.org/wiki/Rotation_(mathematics)" >
rotate transform</a>. Repeatedly rotating by 45 degrees results in calculating 8 <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a>, each suited to a different direction. The algorithm implemented when performing a
<a title="Rotate Transform" rel="tag" href="http://en.wikipedia.org/wiki/Rotation_(mathematics)" >
rotate transform</a> can be expressed as follows:</p>
<p style="text-align:center"><strong><em>Rotate Horizontal Algorithm</em></strong></p>
<p><img id="91476" src="description/RotateX_Algorithm.jpg" alt="" width="500" height="68" style="margin-right:auto; margin-left:auto; display:block"></p>
<p style="text-align:center"><strong><em>Rotate Vertical Algorithm</em></strong></p>
<p><img id="91477" src="description/RotateY_Algorithm.jpg" alt="" width="500" height="69" style="margin-right:auto; margin-left:auto; display:block"></p>
<p>I&rsquo;ve published an in-depth article on <a title="Matrix" rel="tag" href="http://en.wikipedia.org/wiki/Matrix_(mathematics)" >
matrix</a> rotation available here: <a title="C# How to: Image Transform Rotate" rel="tag" href="http://softwarebydefault.com/2013/06/16/image-transform-rotate/" >
C# How to: Image Transform Rotate</a></p>
<p style="text-align:center"><strong><em>Butterfly: Sobel 3 x 3 x 8</em></strong></p>
<p><img id="91478" src="description/Butterfly5_Sobel3x3x8.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></p>
<h1>Implementing Kernel Rotation</h1>
<p style="text-align:justify">The sample source code defines the <strong><em>RotateMatrix</em></strong> method. This method accepts as parameter a single
<a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a>, defined as a two dimensional array of type <strong><em>double</em></strong>. In addition the method also expects as a parameter the degree to which the specified
<a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> should be rotated. The definition as follows:</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">public static double[, ,] RotateMatrix(double[,] baseKernel,  
                                             double degrees) 
{
    double[, ,] kernel = new double[(int )(360 / degrees),  
        baseKernel.GetLength(0), baseKernel.GetLength(1)]; 
 
    int xOffset = baseKernel.GetLength(1) / 2; 
    int yOffset = baseKernel.GetLength(0) / 2; 

    for (int y = 0; y &lt; baseKernel.GetLength(0); y&#43;&#43;) 
    { 
        for (int x = 0; x &lt; baseKernel.GetLength(1); x&#43;&#43;) 
        { 
            for (int compass = 0; compass &lt;  
                kernel.GetLength(0); compass&#43;&#43;) 
            { 
                double radians = compass * degrees * 
                                 Math.PI / 180.0; 

                int resultX = (int)(Math.Round((x - xOffset) * 
                           Math.Cos(radians) - (y - yOffset) * 
                           Math.Sin(radians)) &#43; xOffset); 

                int resultY = (int )(Math.Round((x - xOffset) * 
                            Math.Sin(radians) &#43; (y - yOffset) * 
                            Math.Cos(radians)) &#43; yOffset); 

                kernel[compass, resultY, resultX] = 
                                            baseKernel[y, x]; 
            } 
        } 
    }
 
    return kernel; 
} </pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;RotateMatrix(<span class="cs__keyword">double</span>[,]&nbsp;baseKernel,&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;degrees)&nbsp;&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[(<span class="cs__keyword">int</span>&nbsp;)(<span class="cs__number">360</span>&nbsp;/&nbsp;degrees),&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseKernel.GetLength(<span class="cs__number">0</span>),&nbsp;baseKernel.GetLength(<span class="cs__number">1</span>)];&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;xOffset&nbsp;=&nbsp;baseKernel.GetLength(<span class="cs__number">1</span>)&nbsp;/&nbsp;<span class="cs__number">2</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;yOffset&nbsp;=&nbsp;baseKernel.GetLength(<span class="cs__number">0</span>)&nbsp;/&nbsp;<span class="cs__number">2</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;y&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;y&nbsp;&lt;&nbsp;baseKernel.GetLength(<span class="cs__number">0</span>);&nbsp;y&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;x&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;x&nbsp;&lt;&nbsp;baseKernel.GetLength(<span class="cs__number">1</span>);&nbsp;x&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;compass&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;compass&nbsp;&lt;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kernel.GetLength(<span class="cs__number">0</span>);&nbsp;compass&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;radians&nbsp;=&nbsp;compass&nbsp;*&nbsp;degrees&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Math.PI&nbsp;/&nbsp;<span class="cs__number">180.0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;resultX&nbsp;=&nbsp;(<span class="cs__keyword">int</span>)(Math.Round((x&nbsp;-&nbsp;xOffset)&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Math.Cos(radians)&nbsp;-&nbsp;(y&nbsp;-&nbsp;yOffset)&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Math.Sin(radians))&nbsp;&#43;&nbsp;xOffset);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;resultY&nbsp;=&nbsp;(<span class="cs__keyword">int</span>&nbsp;)(Math.Round((x&nbsp;-&nbsp;xOffset)&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Math.Sin(radians)&nbsp;&#43;&nbsp;(y&nbsp;-&nbsp;yOffset)&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Math.Cos(radians))&nbsp;&#43;&nbsp;yOffset);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kernel[compass,&nbsp;resultY,&nbsp;resultX]&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseKernel[y,&nbsp;x];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
}&nbsp;</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p>&nbsp;</p>
<p style="text-align:center"><strong><em>Butterfly: Prewitt 3 x 3 x 8</em></strong></p>
<p><img id="91479" src="description/Butterfly3_Prewitt3x3x8.jpg" alt="" width="400" height="350" style="margin-right:auto; margin-left:auto; display:block"></p>
<h1>Implementing Compass Edge Detection</h1>
<p style="text-align:justify">The sample source code defines several <a title="Wikipedia: Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> which are implemented in <a title="Convolution" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)#Convolution" >
convolution</a>. The following code snippet provides the <a title="Wikipedia: Edge Enhancement" rel="tag" href="http://en.wikipedia.org/wiki/Edge_enhancement" >
definition</a> of all <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernels</a> defined:</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">public static double[, ,] Prewitt3x3x4 
{
    get 
    {
        double[,] baseKernel = new double[,]  
         { {  -1,  0,  1,  },  
           {  -1,  0,  1,  },  
           {  -1,  0,  1,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 

        return kernel; 
    }  
}  
 
public static double[, ,] Prewitt3x3x8 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -1,  0,  1,  },  
           {  -1,  0,  1,  },  
           {  -1,  0,  1,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 45); 
 
        return kernel; 
    }  
}  

public static double[, ,] Prewitt5x5x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -2, -1,  0,  1, 2,  },  
           {  -2, -1,  0,  1, 2,  }, 
           {  -2, -1,  0,  1, 2,  }, 
           {  -2, -1,  0,  1, 2,  },  
           {  -2, -1,  0,  1, 2,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 
 
        return kernel; 
    }  
}  
 
public static double[, ,] Kirsch3x3x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -3, -3,  5,  },  
           {  -3,  0,  5,  },  
           {  -3, -3,  5,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 

        return kernel; 
    }  
}  

public static double[, ,] Kirsch3x3x8 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -3, -3,  5,  },  
           {  -3,  0,  5,  },  
           {  -3, -3,  5,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 45); 
 
        return kernel; 
    }  
}  
 
public static double[, ,] Sobel3x3x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -1,  0,  1,  },  
           {  -2,  0,  2,  },  
           {  -1,  0,  1,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 
 
        return kernel; 
    }  
}  
 
public static double[, ,] Sobel3x3x8 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -1,  0,  1,  },  
           {  -2,  0,  2,  },  
           {  -1,  0,  1,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 45); 
 
        return kernel; 
    }  
}  
 
public static double[, ,] Sobel5x5x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {   -5,  -4,  0,   4,  5,  },  
           {   -8, -10,  0,  10,  8,  }, 
           {  -10, -20,  0,  20, 10,  }, 
           {   -8, -10,  0,  10,  8,  },  
           {   -5,  -4,  0,   4,  5,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 

        return kernel; 
    }  
}  
 
public static double[, ,] Scharr3x3x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -1,  0,  1,  },  
           {  -3,  0,  3,  },  
           {  -1,  0,  1,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 

        return kernel; 
    }  
}  
 
public static double[, ,] Scharr3x3x8 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {  -1,  0,  1,  },  
           {  -3,  0,  3,  },  
           {  -1,  0,  1,  }, }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 45); 

        return kernel; 
    }  
}  

public static double[, ,] Scharr5x5x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {   -1,  -1,  0,   1,  1,  },  
           {   -2,  -2,  0,   2,  2,  }, 
           {   -3,  -6,  0,   6,  3,  }, 
           {   -2,  -2,  0,   2,  2,  },  
           {   -1,  -1,  0,   1,  1,  }, }; 

        double[, ,] kernel = RotateMatrix(baseKernel, 90); 
 
        return kernel; 
    }  
}  
 
public static double[, ,] Isotropic3x3x4 
{  
    get 
    {  
        double[,] baseKernel = new double[,]  
         { {             -1,  0,             1,  },  
           {  -Math.Sqrt(2),  0,  Math.Sqrt(2),  },  
           {             -1,  0,             1,  },  }; 
 
        double[, ,] kernel = RotateMatrix(baseKernel, 90); 
 
        return kernel; 
    }  
}  

public static double[, ,] Isotropic3x3x8 
{  
    get 
     {  
        double[,] baseKernel = new double[,]  
         { {             -1,  0,             1,  },  
           {  -Math.Sqrt(2),  0,  Math.Sqrt(2),  },  
           {             -1,  0,             1,  }, }; 

        double[, ,] kernel = RotateMatrix(baseKernel, 45); 

        return kernel; 
    }  
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Prewitt3x3x4&nbsp;&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Prewitt3x3x8&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">45</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Prewitt5x5x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Kirsch3x3x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Kirsch3x3x8&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">45</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Sobel3x3x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Sobel3x3x8&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">45</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Sobel5x5x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">5</span>,&nbsp;&nbsp;-<span class="cs__number">4</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">4</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">8</span>,&nbsp;-<span class="cs__number">10</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">10</span>,&nbsp;&nbsp;<span class="cs__number">8</span>,&nbsp;&nbsp;},&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">10</span>,&nbsp;-<span class="cs__number">20</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">20</span>,&nbsp;<span class="cs__number">10</span>,&nbsp;&nbsp;},&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">8</span>,&nbsp;-<span class="cs__number">10</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">10</span>,&nbsp;&nbsp;<span class="cs__number">8</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">5</span>,&nbsp;&nbsp;-<span class="cs__number">4</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">4</span>,&nbsp;&nbsp;<span class="cs__number">5</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Scharr3x3x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">3</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Scharr3x3x8&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">3</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">45</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Scharr5x5x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">3</span>,&nbsp;&nbsp;-<span class="cs__number">6</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">6</span>,&nbsp;&nbsp;<span class="cs__number">3</span>,&nbsp;&nbsp;},&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;&nbsp;-<span class="cs__number">2</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;<span class="cs__number">2</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Isotropic3x3x4&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-Math.Sqrt(<span class="cs__number">2</span>),&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;Math.Sqrt(<span class="cs__number">2</span>),&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;};&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">90</span>);&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;
&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;Isotropic3x3x8&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;baseKernel&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">double</span>[,]&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;-Math.Sqrt(<span class="cs__number">2</span>),&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;Math.Sqrt(<span class="cs__number">2</span>),&nbsp;&nbsp;},&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-<span class="cs__number">1</span>,&nbsp;&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;},&nbsp;};&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,&nbsp;,]&nbsp;kernel&nbsp;=&nbsp;RotateMatrix(baseKernel,&nbsp;<span class="cs__number">45</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;kernel;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;
}</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p>&nbsp;</p>
<p style="text-align:justify">Notice how each property invokes the <strong><em>RotateMatrix</em></strong> method discussed in the previous section.</p>
<p style="text-align:center"><strong><em>Butterfly: Scharr 3 x 3 x 8</em></strong></p>
<p><img id="91480" src="description/Butterfly4_Scharr3x3x8.jpg" alt="" width="400" height="295" style="margin-right:auto; margin-left:auto; display:block"></p>
<p style="text-align:justify">The <strong><em>CompassEdgeDetectionFilter</em></strong> method is defined as an
<a title="MSDN: Extension Methods" rel="tag" href="http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx" >
extension method</a> targeting the <a title="Bitmap" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx" >
Bitmap</a> class. The purpose of this method is to act as a wrapper method encapsulating the technical implementation. The definition as follows:</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">public static Bitmap CompassEdgeDetectionFilter(this Bitmap sourceBitmap,  
                                    CompassEdgeDetectionType compassType) 
{ 
    Bitmap resultBitmap = null; 
 
    switch (compassType) 
    {
        case CompassEdgeDetectionType.Sobel3x3x4: 
             { 
                resultBitmap =  
                sourceBitmap.ConvolutionFilter(Matrix.Sobel3x3x4, 1.0 / 4.0); 
             } break; 
        case CompassEdgeDetectionType.Sobel3x3x8: 
             { 
                resultBitmap =  
                sourceBitmap.ConvolutionFilter(Matrix.Sobel3x3x8, 1.0/ 4.0); 
             } break; 
        case CompassEdgeDetectionType.Sobel5x5x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Sobel5x5x4, 1.0/ 84.0); 
             } break; 
        case CompassEdgeDetectionType.Prewitt3x3x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Prewitt3x3x4, 1.0 / 3.0); 
             } break; 
        case CompassEdgeDetectionType.Prewitt3x3x8: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Prewitt3x3x8, 1.0/ 3.0); 
             } break; 
        case CompassEdgeDetectionType.Prewitt5x5x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Prewitt5x5x4, 1.0 / 15.0); 
             } break; 
        case CompassEdgeDetectionType.Scharr3x3x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Scharr3x3x4, 1.0 / 4.0); 
             } break; 
        case CompassEdgeDetectionType.Scharr3x3x8: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Scharr3x3x8, 1.0 / 4.0); 
             } break; 
        case CompassEdgeDetectionType .Scharr5x5x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Scharr5x5x4, 1.0 / 21.0); 
             } break; 
        case CompassEdgeDetectionType.Kirsch3x3x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Kirsch3x3x4, 1.0 / 15.0); 
             } break; 
        case CompassEdgeDetectionType.Kirsch3x3x8: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Kirsch3x3x8, 1.0 / 15.0); 
             } break; 
        case CompassEdgeDetectionType.Isotropic3x3x4: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Isotropic3x3x4, 1.0 / 3.4); 
             } break; 
        case CompassEdgeDetectionType.Isotropic3x3x8: 
             { 
                resultBitmap = 
                sourceBitmap.ConvolutionFilter(Matrix.Isotropic3x3x8, 1.0 / 3.4); 
             } break; 
     } 
 
    return resultBitmap; 
}</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;Bitmap&nbsp;CompassEdgeDetectionFilter(<span class="cs__keyword">this</span>&nbsp;Bitmap&nbsp;sourceBitmap,&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CompassEdgeDetectionType&nbsp;compassType)&nbsp;&nbsp;
{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Bitmap&nbsp;resultBitmap&nbsp;=&nbsp;<span class="cs__keyword">null</span>;&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">switch</span>&nbsp;(compassType)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Sobel3x3x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Sobel3x3x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">4.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Sobel3x3x8:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Sobel3x3x8,&nbsp;<span class="cs__number">1.0</span>/&nbsp;<span class="cs__number">4.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Sobel5x5x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Sobel5x5x4,&nbsp;<span class="cs__number">1.0</span>/&nbsp;<span class="cs__number">84.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Prewitt3x3x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Prewitt3x3x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">3.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Prewitt3x3x8:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Prewitt3x3x8,&nbsp;<span class="cs__number">1.0</span>/&nbsp;<span class="cs__number">3.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Prewitt5x5x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Prewitt5x5x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">15.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Scharr3x3x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Scharr3x3x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">4.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Scharr3x3x8:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Scharr3x3x8,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">4.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType&nbsp;.Scharr5x5x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Scharr5x5x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">21.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Kirsch3x3x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Kirsch3x3x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">15.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Kirsch3x3x8:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Kirsch3x3x8,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">15.0</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Isotropic3x3x4:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Isotropic3x3x4,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">3.4</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">case</span>&nbsp;CompassEdgeDetectionType.Isotropic3x3x8:&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap&nbsp;=&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.ConvolutionFilter(Matrix.Isotropic3x3x8,&nbsp;<span class="cs__number">1.0</span>&nbsp;/&nbsp;<span class="cs__number">3.4</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="cs__keyword">break</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;resultBitmap;&nbsp;&nbsp;
}</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p>&nbsp;</p>
<p style="text-align:center"><strong><em>Rose: Scharr 3 x 3 x 8</em></strong></p>
<p><img id="91481" src="description/Rose1_Scharr3x3x8.jpg" alt="" width="400" height="362" style="margin-right:auto; margin-left:auto; display:block"></p>
<p style="text-align:justify">Notice from the code snippet listed above, each <strong>
<em>case</em></strong> statement invokes the <strong><em>ConvolutionFilter</em></strong> method. This method has been defined as an
<a title="MSDN: Extension Methods" rel="tag" href="http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx" >
extension method</a> targeting the <a title="Bitmap" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx" >
Bitmap</a> class. The <strong><em>ConvolutionFilter</em></strong> <a title="MSDN: Extension Methods" rel="tag" href="http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx" >
extension method</a> performs the actual task of <a title="Image" rel="tag" href="http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx" >
image</a> <a title="Convolution" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)#Convolution" >
convolution</a>. This method implements each <a title="Image Kernel" rel="tag" href="http://en.wikipedia.org/wiki/Kernel_(image_processing)" >
kernel</a> passed as a parameter, the highest result value will be determined as the output value. The definition as follows:</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">private static Bitmap ConvolutionFilter(this Bitmap sourceBitmap,  
                                     double[,,] filterMatrix,  
                                           double factor = 1,  
                                                int bias = 0)  
{
    BitmapData sourceData = sourceBitmap.LockBits(new Rectangle(0, 0, 
                             sourceBitmap.Width, sourceBitmap.Height), 
                                               ImageLockMode.ReadOnly,  
                                         PixelFormat.Format32bppArgb); 

    byte[] pixelBuffer = new byte [sourceData.Stride * sourceData.Height]; 
    byte[] resultBuffer = new byte [sourceData.Stride * sourceData.Height]; 

    Marshal.Copy(sourceData.Scan0, pixelBuffer, 0, pixelBuffer.Length); 
    sourceBitmap.UnlockBits(sourceData); 

    double blue = 0.0; 
    double green = 0.0; 
    double red = 0.0; 

    double blueCompass = 0.0; 
    double greenCompass = 0.0; 
    double redCompass = 0.0; 

    int filterWidth = filterMatrix.GetLength(1); 
    int filterHeight = filterMatrix.GetLength(0); 

    int filterOffset = (filterWidth-1) / 2; 
    int calcOffset = 0; 

    int byteOffset = 0; 

    for (int offsetY = filterOffset; offsetY &lt;  
        sourceBitmap.Height - filterOffset; offsetY&#43;&#43;) 
     {
        for (int offsetX = filterOffset; offsetX &lt;  
            sourceBitmap.Width - filterOffset; offsetX&#43;&#43;) 
         {
            blue = 0; 
            green = 0; 
            red = 0; 

            byteOffset = offsetY *  
                         sourceData.Stride &#43;  
                         offsetX * 4; 

            for (int compass = 0; compass &lt;  
                 filterMatrix.GetLength(0); compass&#43;&#43;) 
             {
                blueCompass = 0.0; 
                greenCompass = 0.0; 
                redCompass = 0.0; 

                for (int filterY = -filterOffset; 
                    filterY &lt;= filterOffset; filterY&#43;&#43;) 
                 { 
                    for (int filterX = -filterOffset; 
                        filterX &lt;= filterOffset; filterX&#43;&#43;) 
                     { 
                        calcOffset = byteOffset &#43; 
                                     (filterX * 4) &#43; 
                                     (filterY * sourceData.Stride); 

                        blueCompass &#43;= (double)(pixelBuffer[calcOffset]) * 
                                        filterMatrix[compass, 
                                        filterY &#43; filterOffset, 
                                        filterX &#43; filterOffset]; 

                        greenCompass &#43;= (double)(pixelBuffer[calcOffset &#43; 1]) * 
                                        filterMatrix[compass, 
                                        filterY &#43; filterOffset, 
                                        filterX &#43; filterOffset]; 

                        redCompass &#43;= (double)(pixelBuffer[calcOffset &#43; 2]) * 
                                        filterMatrix[compass, 
                                        filterY &#43; filterOffset, 
                                        filterX &#43; filterOffset]; 
                     }
                 }

                blue = (blueCompass &gt; blue ? blueCompass : blue); 
                green = (greenCompass &gt; green ? greenCompass : green); 
                red = (redCompass &gt; red ? redCompass : red); 
             }

            blue = factor * blue &#43; bias; 
            green = factor * green &#43; bias; 
            red = factor * red &#43; bias; 

            if(blue &gt; 255) 
             { blue = 255; } 
            else if(blue &lt; 0) 
             { blue = 0; } 

            if(green &gt; 255) 
             { green = 255; } 
            else if(green &lt; 0) 
             { green = 0; } 

            if(red &gt; 255) 
             { red = 255; } 
            else if(red &lt; 0) 
             { red = 0; } 

            resultBuffer[byteOffset] = (byte)(blue); 
            resultBuffer[byteOffset &#43; 1] = (byte)(green); 
            resultBuffer[byteOffset &#43; 2] = (byte)(red); 
            resultBuffer[byteOffset &#43; 3] = 255; 
         }
     } 

    Bitmap resultBitmap = new Bitmap(sourceBitmap.Width, sourceBitmap.Height); 

    BitmapData resultData = resultBitmap.LockBits(new Rectangle (0, 0, 
                             resultBitmap.Width, resultBitmap.Height), 
                                              ImageLockMode.WriteOnly, 
                                         PixelFormat.Format32bppArgb); 

    Marshal.Copy(resultBuffer, 0, resultData.Scan0, resultBuffer.Length); 
    resultBitmap.UnlockBits(resultData); 

    return resultBitmap; 
} </pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">private</span>&nbsp;<span class="cs__keyword">static</span>&nbsp;Bitmap&nbsp;ConvolutionFilter(<span class="cs__keyword">this</span>&nbsp;Bitmap&nbsp;sourceBitmap,&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>[,,]&nbsp;filterMatrix,&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;factor&nbsp;=&nbsp;<span class="cs__number">1</span>,&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;bias&nbsp;=&nbsp;<span class="cs__number">0</span>)&nbsp;&nbsp;&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;BitmapData&nbsp;sourceData&nbsp;=&nbsp;sourceBitmap.LockBits(<span class="cs__keyword">new</span>&nbsp;Rectangle(<span class="cs__number">0</span>,&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.Width,&nbsp;sourceBitmap.Height),&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ImageLockMode.ReadOnly,&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PixelFormat.Format32bppArgb);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">byte</span>[]&nbsp;pixelBuffer&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">byte</span>&nbsp;[sourceData.Stride&nbsp;*&nbsp;sourceData.Height];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">byte</span>[]&nbsp;resultBuffer&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<span class="cs__keyword">byte</span>&nbsp;[sourceData.Stride&nbsp;*&nbsp;sourceData.Height];&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Marshal.Copy(sourceData.Scan0,&nbsp;pixelBuffer,&nbsp;<span class="cs__number">0</span>,&nbsp;pixelBuffer.Length);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.UnlockBits(sourceData);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;blue&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;green&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;red&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;blueCompass&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;greenCompass&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">double</span>&nbsp;redCompass&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;filterWidth&nbsp;=&nbsp;filterMatrix.GetLength(<span class="cs__number">1</span>);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;filterHeight&nbsp;=&nbsp;filterMatrix.GetLength(<span class="cs__number">0</span>);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;filterOffset&nbsp;=&nbsp;(filterWidth<span class="cs__number">-1</span>)&nbsp;/&nbsp;<span class="cs__number">2</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;calcOffset&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">int</span>&nbsp;byteOffset&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;offsetY&nbsp;=&nbsp;filterOffset;&nbsp;offsetY&nbsp;&lt;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.Height&nbsp;-&nbsp;filterOffset;&nbsp;offsetY&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;offsetX&nbsp;=&nbsp;filterOffset;&nbsp;offsetX&nbsp;&lt;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceBitmap.Width&nbsp;-&nbsp;filterOffset;&nbsp;offsetX&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blue&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;green&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;red&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;byteOffset&nbsp;=&nbsp;offsetY&nbsp;*&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourceData.Stride&nbsp;&#43;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offsetX&nbsp;*&nbsp;<span class="cs__number">4</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;compass&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;compass&nbsp;&lt;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterMatrix.GetLength(<span class="cs__number">0</span>);&nbsp;compass&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blueCompass&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenCompass&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redCompass&nbsp;=&nbsp;<span class="cs__number">0.0</span>;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;filterY&nbsp;=&nbsp;-filterOffset;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterY&nbsp;&lt;=&nbsp;filterOffset;&nbsp;filterY&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">for</span>&nbsp;(<span class="cs__keyword">int</span>&nbsp;filterX&nbsp;=&nbsp;-filterOffset;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterX&nbsp;&lt;=&nbsp;filterOffset;&nbsp;filterX&#43;&#43;)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;calcOffset&nbsp;=&nbsp;byteOffset&nbsp;&#43;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(filterX&nbsp;*&nbsp;<span class="cs__number">4</span>)&nbsp;&#43;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(filterY&nbsp;*&nbsp;sourceData.Stride);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blueCompass&nbsp;&#43;=&nbsp;(<span class="cs__keyword">double</span>)(pixelBuffer[calcOffset])&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterMatrix[compass,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterY&nbsp;&#43;&nbsp;filterOffset,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterX&nbsp;&#43;&nbsp;filterOffset];&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greenCompass&nbsp;&#43;=&nbsp;(<span class="cs__keyword">double</span>)(pixelBuffer[calcOffset&nbsp;&#43;&nbsp;<span class="cs__number">1</span>])&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterMatrix[compass,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterY&nbsp;&#43;&nbsp;filterOffset,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterX&nbsp;&#43;&nbsp;filterOffset];&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redCompass&nbsp;&#43;=&nbsp;(<span class="cs__keyword">double</span>)(pixelBuffer[calcOffset&nbsp;&#43;&nbsp;<span class="cs__number">2</span>])&nbsp;*&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterMatrix[compass,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterY&nbsp;&#43;&nbsp;filterOffset,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filterX&nbsp;&#43;&nbsp;filterOffset];&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blue&nbsp;=&nbsp;(blueCompass&nbsp;&gt;&nbsp;blue&nbsp;?&nbsp;blueCompass&nbsp;:&nbsp;blue);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;green&nbsp;=&nbsp;(greenCompass&nbsp;&gt;&nbsp;green&nbsp;?&nbsp;greenCompass&nbsp;:&nbsp;green);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;red&nbsp;=&nbsp;(redCompass&nbsp;&gt;&nbsp;red&nbsp;?&nbsp;redCompass&nbsp;:&nbsp;red);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blue&nbsp;=&nbsp;factor&nbsp;*&nbsp;blue&nbsp;&#43;&nbsp;bias;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;green&nbsp;=&nbsp;factor&nbsp;*&nbsp;green&nbsp;&#43;&nbsp;bias;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;red&nbsp;=&nbsp;factor&nbsp;*&nbsp;red&nbsp;&#43;&nbsp;bias;&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>(blue&nbsp;&gt;&nbsp;<span class="cs__number">255</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;blue&nbsp;=&nbsp;<span class="cs__number">255</span>;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">else</span>&nbsp;<span class="cs__keyword">if</span>(blue&nbsp;&lt;&nbsp;<span class="cs__number">0</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;blue&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;}&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>(green&nbsp;&gt;&nbsp;<span class="cs__number">255</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;green&nbsp;=&nbsp;<span class="cs__number">255</span>;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">else</span>&nbsp;<span class="cs__keyword">if</span>(green&nbsp;&lt;&nbsp;<span class="cs__number">0</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;green&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;}&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>(red&nbsp;&gt;&nbsp;<span class="cs__number">255</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;red&nbsp;=&nbsp;<span class="cs__number">255</span>;&nbsp;}&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">else</span>&nbsp;<span class="cs__keyword">if</span>(red&nbsp;&lt;&nbsp;<span class="cs__number">0</span>)&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;red&nbsp;=&nbsp;<span class="cs__number">0</span>;&nbsp;}&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBuffer[byteOffset]&nbsp;=&nbsp;(<span class="cs__keyword">byte</span>)(blue);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBuffer[byteOffset&nbsp;&#43;&nbsp;<span class="cs__number">1</span>]&nbsp;=&nbsp;(<span class="cs__keyword">byte</span>)(green);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBuffer[byteOffset&nbsp;&#43;&nbsp;<span class="cs__number">2</span>]&nbsp;=&nbsp;(<span class="cs__keyword">byte</span>)(red);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBuffer[byteOffset&nbsp;&#43;&nbsp;<span class="cs__number">3</span>]&nbsp;=&nbsp;<span class="cs__number">255</span>;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Bitmap&nbsp;resultBitmap&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Bitmap(sourceBitmap.Width,&nbsp;sourceBitmap.Height);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;BitmapData&nbsp;resultData&nbsp;=&nbsp;resultBitmap.LockBits(<span class="cs__keyword">new</span>&nbsp;Rectangle&nbsp;(<span class="cs__number">0</span>,&nbsp;<span class="cs__number">0</span>,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap.Width,&nbsp;resultBitmap.Height),&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ImageLockMode.WriteOnly,&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PixelFormat.Format32bppArgb);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Marshal.Copy(resultBuffer,&nbsp;<span class="cs__number">0</span>,&nbsp;resultData.Scan0,&nbsp;resultBuffer.Length);&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;resultBitmap.UnlockBits(resultData);&nbsp;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;resultBitmap;&nbsp;&nbsp;
}&nbsp;</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<p style="text-align:center"><strong><em>Rose: Isotropic 3 x 3 x 8</em></strong></p>
<p><img id="91482" src="description/Rose2_Isotropic3x3x8.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></p>
<h1>Sample Images</h1>
<p style="text-align:justify">This article features a number of sample images. All featured images have been licensed allowing for reproduction. The following image files feature a sample images:</p>
<ul>
<li style="text-align:justify"><strong><em>Wasp</em></strong> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
Attribution-Share Alike 3.0 Unported</a> license. Download from <a title="Wikimedia" href="http://commons.wikimedia.org/wiki/File:Gemeiner_Widderbock_4483.JPG">
Wikimedia</a> </li><li style="text-align:justify"><strong><em>Ladybug</em></strong> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/2.0/deed.en" >
Attribution-Share Alike 2.0 Generic</a> license. Download from <a title="Wikipedia" href="http://en.wikipedia.org/wiki/File:Coccinella_magnifica01.jpg">
Wikipedia</a> </li><li style="text-align:justify"><strong><em>Ant</em></strong> &ndash; Released into the
<strong><a title="Public Domain" href="http://en.wikipedia.org/wiki/en:public_domain" >public domain</a></strong> by its author,
<strong><a title="Sean Hoyland" href="http://commons.wikimedia.org/w/index.php?title=User:Sean.hoyland&amp;action=edit&amp;redlink=1" >Sean.hoyland</a></strong>. This applies worldwide. In some countries this may not be legally possible; if so:
<a title="Sean Hoyland" href="http://commons.wikimedia.org/w/index.php?title=User:Sean.hoyland&amp;action=edit&amp;redlink=1" >
Sean.hoyland</a><em></em><em> </em>grants anyone the right to use this work <strong>
for any purpose</strong>, without any conditions, unless such conditions are required by law<em>.</em> Download from
<a title="Wikipedia" href="http://en.wikipedia.org/wiki/File:Myrmarachne_plataleoides_female_thailand.jpg">
Wikipedia</a> </li><li style="text-align:justify"><strong><em>Prey Mantis</em></strong> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
Attribution-Share Alike 3.0 Unported</a> license. Download from <a title="Wikipedia" href="http://en.wikipedia.org/wiki/File:Gottesanbeterin_Abwehr.JPG">
Wikipedia</a> </li><li style="text-align:justify"><em><strong>Bee</strong></em> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
Attribution-Share Alike 3.0 Unported</a> license. Download from <a title="Wikipedia" href="http://commons.wikimedia.org/wiki/File:Honey_Bee_takes_Nectar.JPG" >
Wikipedia</a> </li><li style="text-align:justify"><strong><em>Red Pierrot Butterfly</em></strong>&nbsp;<strong><em>1</em></strong>- Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
Attribution-Share Alike 3.0 Unported</a> license. Download from <a title="WikiMedia" href="http://commons.wikimedia.org/wiki/File:Red_Pierrot_(Talicada_nyseus)_-_Nectaring.jpg" >
WikiMedia</a> </li><li style="text-align:justify"><strong><em>Siproeta Epaphus Butterfly</em></strong> &ndash; Licensed under the
<a href="http://en.wikipedia.org/wiki/en:Creative_Commons">Creative Commons</a> <a href="http://creativecommons.org/licenses/by/3.0/deed.en">
Attribution 3.0 Unported</a> license. Download from <a title="WikiMedia" href="http://commons.wikimedia.org/wiki/File:Siproeta_epaphus_Galawebdesign.jpg" >
WikiMedia</a> </li><li style="text-align:justify"><strong><em>Red Pierrot Butterfly 2 &ndash; </em></strong>Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://code.msdn.microsoft.com/Compass-Edge-Detection-4e8ca55f/https://creativecommons.org/licenses/by/2.0/deed.en" >
Attribution 2.0 Generic</a> license. Download from <a title="Wikipedia" href="http://code.msdn.microsoft.com/Compass-Edge-Detection-4e8ca55f/https://en.wikipedia.org/wiki/File:Talicada_nyseus_(1).jpg" >
Wikipedia</a> </li><li style="text-align:justify"><strong><em>Iceberg Rose</em></strong> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
Attribution-Share Alike 3.0 Unported</a> license. <strong>Attribution: </strong><a title="Stan Shebs" href="http://commons.wikimedia.org/wiki/User:Stan_Shebs" >Stan Shebs</a><strong></strong><strong>.</strong> Download from
<a title="Wikipedia" href="http://en.wikipedia.org/wiki/File:Rosa_Iceberg_1.jpg" >
Wikipedia</a> </li><li style="text-align:justify"><strong><em>Heidi Klum Rose</em></strong> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> Attribution-Share Alike <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
3.0 Unported</a>, <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/2.5/deed.en" >
2.5 Generic</a>, <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/2.0/deed.en" >
2.0 Generic</a> and <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/1.0/deed.en" >
1.0 Generic</a> license. Download from <a title="Wikipedia" href="http://en.wikipedia.org/wiki/File:Heidi-Klum-Rose_(Tantau_2006)_.jpg" >
Wikipedia</a> </li><li style="text-align:justify"><strong><em>Viceroy Butterfly</em></strong> &ndash; Licensed under the
<a title="Creative Commons" href="http://en.wikipedia.org/wiki/en:Creative_Commons" >
Creative Commons</a> <a title="Creative Commons" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en" >
Attribution-Share Alike 3.0 Unported</a> license. Attributed to <a title="D. Gordon E. Robertson" href="http://commons.wikimedia.org/wiki/User:Dger" >
D. Gordon E. Robertson</a>. Download from <a title="Wikipedia" href="http://en.wikipedia.org/wiki/File:Viceroy_2.jpg" >
Wikipedia</a> </li></ul>
<p style="text-align:center"><strong><em>The Original Image</em></strong></p>
<p><strong><em><img id="91455" src="description/Viceroy_2.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></em></strong></p>
<p style="text-align:center"><strong><em>Butterfly: Isotropic 3 x 3 x 4</em></strong></p>
<p><span><strong><em><img id="91456" src="description/Butterfly_Isotropic3x3x4.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Isotropic 3 x 3 x 8</em></strong></span></p>
<p><span><strong><em><img id="91458" src="description/Butterfly_Isotropic3x3x8.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Kirsch 3 x 3 x 4</em></strong></span></p>
<p><span><strong><em><img id="91459" src="description/Butterfly_Kirsch3x3x4.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Kirsch 3 x 3 x 8</em></strong></span></p>
<p><span><strong><em><img id="91460" src="description/Butterfly_Kirsch3x3x8.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Prewitt 3 x 3 x 4</em></strong></span></p>
<p><span><strong><em><img id="91461" src="description/Butterfly_Prewitt3x3x4.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Prewitt 3 x 3 x 8</em></strong></span></p>
<p><span><strong><em><img id="91462" src="description/Butterfly_Prewitt3x3x8.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Prewitt 5 x 5 x 4</em></strong></span></p>
<p><span><strong><em><img id="91463" src="description/Butterfly_Prewitt5x5x4.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Scharr 3 x 3 x 4</em></strong></span></p>
<p><span><strong><em><img id="91464" src="description/Butterfly_Scharr3x3x4.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Scharr 3 x 3 x 8</em></strong></span></p>
<p><span><strong><em><img id="91465" src="description/Butterfly_Scharr3x3x8.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Scharr 5 x 5 x 4</em></strong></span></p>
<p><span><strong><em><img id="91466" src="description/Butterfly_Scharr5x5x4.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Sobel 3&nbsp; x 3 x 4</em></strong></span></p>
<p><span><strong><em><img id="91467" src="description/Butterfly_Sobel3x3x4.jpg" alt="" width="400" height="300" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Sobel 3 x 3 x 8</em></strong></span></p>
<p><span><strong><em><img id="91468" src="description/Butterfly_Sobel3x3x8.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></em></strong></span></p>
<p style="text-align:center"><span><strong><em>Butterfly: Sobel 5 x 5 x 4</em></strong></span></p>
<p><span><img id="91469" src="description/Butterfly_Sobel5x5x4.jpg" alt="" style="margin-right:auto; margin-left:auto; display:block"></span></p>
<h1><span>Source Code Files</span></h1>
<ul>
<li><em>ExtBitmap.cs - Contains the definition of the CompassEdgeDetectionFilter and ConvolutionFilter extension methods.</em>
</li><li><em><em>MainForm.cs - Windows Forms based sample application.</em></em> </li></ul>
<h1>More Information</h1>
<p style="text-align:justify">This article is based on an article originally posted on my
<a href="http://softwarebydefault.com/" >blog</a>: <a href="http://softwarebydefault.com/2013/06/22/compass-edge-detection/">
http://softwarebydefault.com/2013/06/22/compass-edge-detection/</a>&nbsp;If you have any questions/comments please feel free to make use of the Q&amp;A section on this page, also please remember to rate this article.</p>
<p><strong><em><a title="About Dewald Esterhuizen" rel="tag" href="http://softwarebydefault.com/about/" >Dewald Esterhuizen</a></em></strong></p>

</div>


    </div>
</body>
</html>
